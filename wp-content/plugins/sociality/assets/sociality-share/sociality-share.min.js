!function(){var t;function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var i=window,p=i.jQuery,o=i.location,r=i.socialityData,u=p(document),n="sociality-share",s="https:"===o.protocol?"https:":"http:";function h(t,e){return function(t,e,i){return(t||"").replace(/\{([^}]+)\}/g,(function(t,p){return p in e?i?i(e[p]):e[p]:t}))}(t,e,encodeURIComponent)}var c=(e(t={facebook:{popupUrl:"https://www.facebook.com/sharer.php?t={title}&u={url}",popupWidth:600,popupHeight:359},twitter:{counters:!1,popupUrl:"https://twitter.com/intent/tweet?text={text}&url={url}",popupWidth:600,popupHeight:250,click:function(){return/[.?:\-–—]\s*$/.test(this.options.title)||(this.options.title+=":"),!0}},pinterest:{counterUrl:"".concat(s,"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?"),convertNumber:function(t){return t.count},popupUrl:"https://pinterest.com/pin/create/button/?url={url}&description={text}&media={media}",popupWidth:740,popupHeight:550},vkontakte:{counterUrl:"https://vk.com/share.php?act=count&url={url}&index={index}",counter:function(t,e){var i=c.vkontakte;i._||(i._=[],window.VK||(window.VK={}),window.VK.Share={count:function(t,e){i._[t].resolve(e)}});var o=i._.length;i._.push(e),p.getScript(h(t,{index:o})).fail(e.reject)},popupUrl:"https://vk.com/share.php?url={url}&title={title}&comment={excerpt}",popupWidth:655,popupHeight:450},odnoklassniki:{counterUrl:"".concat(s,"//connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}"),counter:function(t,e){var i=c.odnoklassniki;i._||(i._=[],window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(t,e){i._[t].resolve(e)});var o=i._.length;i._.push(e),p.getScript(h(t,{index:o})).fail(e.reject)},popupUrl:"https://connect.ok.ru/offer?url={url}",popupWidth:580,popupHeight:336},mailru:{counterUrl:"".concat(s,"//connect.mail.ru/share_count?url_list={url}&callback=1&func=?"),convertNumber:function(t){var e="";return Object.keys(t).forEach((function(i){!e&&t[i]&&t[i].shares&&(e=t[i].shares)})),e},popupUrl:"https://connect.mail.ru/share?share_url={url}&title={title}",popupWidth:492,popupHeight:500},linkedin:{popupUrl:"https://www.linkedin.com/shareArticle?title={title}&url={url}&summary={excerpt}&mini=true",popupWidth:500,popupHeight:550},mix:{popupUrl:"https://mix.com/add?url={url}",popupWidth:500,popupHeight:550},tumblr:{popupUrl:"https://www.tumblr.com/widgets/share/tool?canonicalUrl={url}&title={title}&caption={excerpt}&posttype=link",popupWidth:500,popupHeight:550},skype:{popupUrl:"https://web.skype.com/share?url={url}&text={text}",popupWidth:500,popupHeight:550},buffer:{popupUrl:"https://buffer.com/add?url={url}&text={text}",popupWidth:500,popupHeight:550},pocket:{popupUrl:"https://getpocket.com/save?url={url}",popupWidth:500,popupHeight:550},xing:{popupUrl:"https://www.xing.com/spi/shares/new?url={url}",popupWidth:500,popupHeight:550},reddit:{popupUrl:"https://www.reddit.com/submit?title={title}&url={url}",popupWidth:500,popupHeight:550},flipboard:{popupUrl:"https://share.flipboard.com/bookmarklet/popout?v=2&title={text}&url={url}",popupWidth:500,popupHeight:550},delicious:{popupUrl:"https://del.icio.us/post?url={url}&title={title}",popupWidth:500,popupHeight:550},amazon:{popupUrl:"https://www.amazon.com/gp/wishlist/static-add?u={url}&t={title}",popupWidth:500,popupHeight:550},digg:{popupUrl:"https://digg.com/submit?title={text}&url={url}",popupWidth:500,popupHeight:550},evernote:{popupUrl:"https://www.evernote.com/clip.action?url={url}&title={text}",popupWidth:500,popupHeight:550},blogger:{popupUrl:"https://www.blogger.com/blog-this.g?u={url}&n={title}&t={excerpt}",popupWidth:500,popupHeight:550},yahoo:{popupUrl:"https://compose.mail.yahoo.com/?body={text}%20{url}&subject={title}",popupWidth:500,popupHeight:550},whatsapp:{popupUrl:"https://api.whatsapp.com/send?text={text}%20{url}",popupWidth:500,popupHeight:550},viber:{popupUrl:"viber://forward?text={text}%20{url}",popupWidth:500,popupHeight:550},telegram:{popupUrl:"https://t.me/share/url?url={url}&text={text}",popupWidth:500,popupHeight:550}},"mix",{popupUrl:"https://mix.com/mixit?su=submit&url={url}",popupWidth:850,popupHeight:735}),e(t,"diaspora",{popupUrl:"https://share.diasporafoundation.org/?title={title}&url={url}",popupWidth:500,popupHeight:550}),e(t,"line",{popupUrl:"https://lineit.line.me/share/ui?url={url}&text={text}",popupWidth:500,popupHeight:550}),e(t,"renren",{popupUrl:"http://widget.renren.com/dialog/share?resourceUrl={url}&srcUrl={url}&title={title}&description={excerpt}",popupWidth:500,popupHeight:550}),e(t,"wechat",{popupUrl:"".concat(r.site_url,"?sociality_share_wechat=1&url={url}"),popupWidth:400,popupHeight:650}),e(t,"weibo",{popupUrl:"http://service.weibo.com/share/share.php?url={url}&title={title}",popupWidth:650,popupHeight:320}),e(t,"tencent-weibo",{popupUrl:"http://v.t.qq.com/share/share.php?url={url}&title={title}",popupWidth:650,popupHeight:320}),e(t,"google_plus",{popupUrl:"https://plus.google.com/share?url={url}",popupWidth:500,popupHeight:550}),e(t,"stumbleupon",{popupUrl:"http://www.stumbleupon.com/submit?url={url}",popupWidth:500,popupHeight:550}),t),l={promises:{},fetch:function(t,e,i){l.promises[t]||(l.promises[t]={});var o=l.promises[t];if(!i.forceUpdate&&o[e])return o[e];var r=p.extend({},c[t],i),u=p.Deferred(),n=r.counterUrl&&h(r.counterUrl,{url:e});return n&&p.isFunction(r.counter)?r.counter(n,u):r.counterUrl?p.getJSON(n).done((function(t){try{var e=t;p.isFunction(r.convertNumber)&&(e=r.convertNumber(t)),u.resolve(e)}catch(t){u.reject()}})).fail(u.reject):u.reject(),o[e]=u.promise(),o[e]}};function a(t,e){this.widget=t,this.options=p.extend({},e),this.detectService(),this.service&&this.init()}function d(t,e){this.container=t,this.options=e,this.init()}a.prototype={init:function(){this.getPopupUrl=p.proxy(this.getPopupUrl,this),this.click=p.proxy(this.click,this),this.initCounter=p.proxy(this.initCounter,this),this.detectParams(),this.options.popupUrl&&this.widget.attr("href",this.getPopupUrl()),this.widget.on("click",this.click),setTimeout(this.initCounter,0)},update:function(t){p.extend(this.options,{forceUpdate:!1},t),this.widget.find(".".concat(n,"-counter")).html(""),this.initCounter()},detectService:function(){var t=this.widget.data("share");t&&(this.service=t,p.extend(this.options,c[t]))},detectParams:function(){var t=this.widget.data();if(t.counter){var e=parseInt(t.counter,10);Number.isNaN(e)?this.options.counterUrl=t.counter:this.options.counterNumber=e}t.title&&(this.options.title=t.title),t.url&&(this.options.url=t.url),t.media&&(this.options.media=t.media),t.excerpt&&(this.options.excerpt=t.excerpt),t.text&&(this.options.text=t.text)},initCounter:function(){if(this.options.counters)if(this.options.counterNumber)this.updateCounter(this.options.counterNumber);else{var t={counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate};l.fetch(this.service,this.options.url,t).always(p.proxy(this.updateCounter,this))}},updateCounter:function(t){(t=parseInt(t,10)||0)||this.options.zeroes||(t=""),this.widget.find(".".concat(n,"-counter")).html(t),this.widget.trigger("counter.".concat(n),[this.service,t])},click:function(t){var e=this.options,i=!0;return p.isFunction(e.click)&&(i=e.click.call(this,t)),i&&this.openPopup(this.getPopupUrl(),{width:e.popupWidth,height:e.popupHeight}),!1},getPopupUrl:function(){var t=this.options,e=h(t.popupUrl,{url:t.url,title:t.title,media:t.media,excerpt:t.excerpt,text:t.text}),i=p.param(p.extend(this.widget.data(),this.options.data));if(p.isEmptyObject(i))return e;var o=-1===e.indexOf("?")?"?":"&";return e+o+i},openPopup:function(t,e){var i=window.screenLeft,r=window.screenTop,u=window.innerWidth,s=window.innerHeight,h=Math.round(u/2-e.width/2)+i,c=0;s>e.height&&(c=Math.round(s/3-e.height/2)+r);var l=window.open(t,"sl_".concat(this.service),"left=".concat(h,",top=").concat(c,",")+"width=".concat(e.width,",height=").concat(e.height,",personalbar=0,toolbar=0,scrollbars=1,resizable=1"));if(l){l.focus(),this.widget.trigger("popup_opened.".concat(n),[this.service,l]);var a=setInterval(p.proxy((function(){l.closed&&(clearInterval(a),this.widget.trigger("popup_closed.".concat(n),this.service))}),this),this.options.popupCheckInterval)}else o.href=t}},d.prototype={init:function(){this.countersLeft=0,this.number=0,this.container.on("counter.".concat(n),p.proxy(this.updateCounter,this));var t=this.container.find(".".concat(n,"-button"));this.buttons=[],t.each(p.proxy((function(t,e){var i=new a(p(e),this.options);this.buttons.push(i),i.options.counterUrl&&(this.countersLeft+=1)}),this)),this.options.counters&&(this.timeout=setTimeout(p.proxy(this.ready,this,!0),this.options.timeout))},update:function(t){if(t.forceUpdate||t.url!==this.options.url){this.number=0,this.countersLeft=this.buttons.length,this.widget&&this.widget.find(".".concat(n,"-counter")).html(""),p.extend(this.options,t);for(var e=0;e<this.buttons.length;e+=1)this.buttons[e].update(t)}},updateCounter:function(t,e,i){((i=i||0)||this.options.zeroes)&&(this.number+=i),this.countersLeft-=1,0===this.countersLeft&&this.ready()},ready:function(t){this.timeout&&clearTimeout(this.timeout),t||this.container.trigger("ready.".concat(n),this.number)}},p.fn.socialityShare=function(t){return this.each((function(){var e=p(this),i=e.data(n);i?p.isPlainObject(t)&&i.update(t):(i=new d(e,p.extend({},p.fn.socialityShare.defaults,t,function(t){function e(t,e){return e.toUpper()}var i={},p=t.data();return Object.keys(p).forEach((function(t){var o=p[t];"yes"===o?o=!0:"no"===o&&(o=!1),i[t.replace(/-(\w)/g,e)]=o})),i}(e))),e.data(n,i))}))},p.fn.socialityShare.defaults={url:window.location.href.replace(window.location.hash,""),title:document.title,media:"",excerpt:"",text:"",counters:!0,zeroes:!1,timeout:1e4,popupCheckInterval:500},u.on("ready.".concat(n),(function(){p(".".concat(n)).socialityShare()}))}();